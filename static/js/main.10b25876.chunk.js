(this["webpackJsonptodo-list"]=this["webpackJsonptodo-list"]||[]).push([[0],{50:function(e,t,a){e.exports=a(97)},59:function(e,t,a){},66:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(29),o=a.n(s),i=a(13),c=a(7),l=a(23),d=a(42),u=a.n(d),m=a(6),p="SET_CURRENT_USER",h={currentUser:null},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(m.a)({},e,{currentUser:t.payload});default:return e}},b=Object(l.c)({user:f}),v=[u.a],g=Object(l.d)(b,l.a.apply(void 0,v)),E=(a(59),a(1)),y=a.n(E),N=a(4),w=a(8),S=a(9),k=a(11),D=a(10),O=a(12),C=a(21),L=a(26),U=a.n(L),I=(a(61),a(64),function(){var e=Object(N.a)(y.a.mark((function e(t,a){var n,r,s,o,i,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=x.doc("users/".concat(t.uid)),e.next=5,n.get();case 5:if(!e.sent.exists){r=t.uid,s=t.displayName,o=t.email,i=new Date,c=Date.now();try{n.set(Object(m.a)({id:r,displayName:s,email:o,createdAt:i,lastActive:c},a,{userID:r.match(/\d/g).join(""),todoListIDs:[],inviteIDs:{},invitesSent:{},activeTodoList:null,tempPassword:null}))}catch(l){console.log("Error creating user",l.message)}}return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());U.a.initializeApp({apiKey:"AIzaSyDDUfP83Z9VOs6fkra1RE1kVuhU_X9oXhQ",authDomain:"csc335-todoapp.firebaseapp.com",databaseURL:"https://csc335-todoapp.firebaseio.com",projectId:"csc335-todoapp",storageBucket:"csc335-todoapp.appspot.com",messagingSenderId:"551348834375",appId:"1:551348834375:web:6e6935bf1dcdc68675e162"});var j=U.a.auth(),x=U.a.firestore(),T=function(){var e=Object(N.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={url:"http://localhost:3000/signin?email="+t,handleCodeInApp:!0},j.sendSignInLinkToEmail(t,a).then((function(){localStorage.setItem("emailForSignIn",t),console.log("SUCCESS: Email sent.")})).catch((function(e){console.error("ERROR: Unable to send email."),console.error(e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=new U.a.auth.GoogleAuthProvider;P.setCustomParameters({prompt:"select_account"});var M=function(e){e.preventDefault(),j.signInWithPopup(P)},R=U.a,A=a(43),q=a(44);a(66);function B(){var e=Object(A.a)(["\n\tpadding: 10px 15px;\n\tcursor: pointer;\n"]);return B=function(){return e},e}var F=q.a.div(B()),W=Object(c.b)((function(e){return{currentUser:e.user.currentUser}}))((function(e){var t=e.currentUser,a=Object(C.g)(),n=function(){var e=Object(N.a)(y.a.mark((function e(){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x.collection("todoLists"),e.next=3,n.get();case 3:r=e.sent,r.docs.forEach(function(){var e=Object(N.a)(y.a.mark((function e(a){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x.doc("todoLists/".concat(a.id)),e.next=3,n.get();case 3:r=e.sent,n.update({activeContributors:r.data().activeContributors.filter((function(e){return e!==t.userID}))});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j.signOut(),a.push("/signout");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"header navbar navbar-light"},r.a.createElement("div",{onClick:function(){t?a.push("/user/".concat(t.userID,"/todo-lists")):a.push("/todo-list")},className:"nav-title",id:"home"},r.a.createElement("h1",null,"Cloud ToDo")),r.a.createElement("div",{className:"options"},r.a.createElement(i.b,{className:"option",to:t?"/user/".concat(t.userID,"/todo-lists"):"/todo-list"},r.a.createElement(F,null,t?"TODO LISTS":null)),r.a.createElement(i.b,{className:"option",to:"/contact"},r.a.createElement(F,null,"CONTACT")),t?r.a.createElement(i.b,{to:"/user/".concat(t.userID,"/profile"),className:"option"},r.a.createElement(F,null,"ACCOUNT")):null,t?r.a.createElement("div",{className:"option",onClick:function(){return n()}},r.a.createElement(F,null,"SIGN OUT")):r.a.createElement(i.b,{className:"option",to:"/signin"},r.a.createElement(F,null,"SIGN IN"))))})),H=a(17),G=a(15),_=a(30),J=a.n(_),K=(a(77),function(e){function t(){var e;return Object(w.a)(this,t),(e=Object(k.a)(this,Object(D.a)(t).call(this))).handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(G.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault(),""!==e.state.text&&(e.props.onSubmit({id:J.a.generate(),text:e.state.text,complete:!1,contributorID:e.props.currentUser?e.props.currentUser.userID:null}),e.setState({text:""}))},e.state={text:""},e}return Object(O.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"todo-form"},r.a.createElement("form",{className:"form-container",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",name:"text",value:this.state.text,onChange:this.handleChange,placeholder:"Enter Your ToDos Here",className:"form-control"}),r.a.createElement("button",{className:"add-todo-btn btn btn-dark",onClick:this.handleSubmit},"Add ToDo")))}}]),t}(r.a.Component)),z=Object(c.b)((function(e){return{currentUser:e.user.currentUser}}))(K),Q=a(25),V=(a(78),Object(c.b)((function(e){return{currentUser:e.user.currentUser}}))((function(e){var t=e.todo,a=t.todoId,s=t.text,o=t.complete,i=e.adminID,c=e.contributorID,l=e.toggleComplete,d=e.deleteTodo,u=e.setTodo,p=e.textValue,h=e.index,f=Object(n.useState)({editMode:!1,text:s}),b=Object(Q.a)(f,2),v=b[0],g=b[1],E=function(){var t=Object(N.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g(Object(m.a)({},v,{editMode:!1})),u(e.todo,v.text);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{id:h,className:"todo-container input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement("input",{id:a,type:"checkbox",checked:o,onChange:v.editMode?null:l,className:"checkbox-styled"}),r.a.createElement("label",{className:"box-label",htmlFor:"checkbox"}))),r.a.createElement("div",{type:"text",className:"todo-item form-control ".concat(o?"complete":""," ").concat(v.editMode?"edit-input":""),onClick:v.editMode?null:l},v.editMode?r.a.createElement("input",{id:"".concat(a,"-input"),type:"text",className:"edit-input-field",value:v.text,onChange:function(e){return function(e){var t=e.target.value;g(Object(m.a)({},v,{text:t}))}(e)},onBlur:function(){E()},onKeyPress:function(e){""!==v.text&&"Enter"===e.key&&E()}}):p),r.a.createElement("button",{className:"edit-todo badge badge-light ".concat(e.currentUser?e.currentUser.userID!==i&&e.currentUser.userID!==c||o?"disable-edit":"":o?"disable-edit":""," ").concat(v.editMode?"editing":""),onClick:o?null:function(){g(Object(m.a)({},v,{editMode:!v.editMode}))},disabled:!!e.currentUser&&(e.currentUser.userID!==c&&e.currentUser.userID!==i)},r.a.createElement("i",{className:"material-icons"},"edit")),r.a.createElement("button",{className:"delete-todo badge badge-danger ".concat(e.currentUser&&e.currentUser.userID!==c&&e.currentUser.userID!==i?"disable-delete":""),onClick:d,disabled:!!e.currentUser&&(e.currentUser.userID!==c&&e.currentUser.userID!==i)},r.a.createElement("i",{className:"material-icons"},"delete")),r.a.createElement("div",{id:h,className:"reorder-todo"},r.a.createElement("i",{className:"material-icons"},"reorder")))}))),Y=(a(79),function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(k.a)(this,Object(D.a)(t).call(this,e))).handleChange=function(e){a.setState({title:e.target.value})},a.handleClick=function(){""!==a.state.title&&(a.props.currentUser&&a.props.currentUser.userID!==a.props.listAdmin||a.setState((function(e){return{editMode:!e.editMode,titleChanged:!0}})))},a.keyPressHandler=function(e){""!==a.state.title&&"Enter"===e.key&&a.setState({editMode:!1})},a.updateTitle=Object(N.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.listID,n=x.doc("todoLists/".concat(t)),e.next=4,n.get();case 4:if(e.sent.exists)try{n.update({listName:a.state.title}).then(a.props.handleListName(a.state.title))}catch(r){console.log("Error updating list name",r.message)}case 6:case"end":return e.stop()}}),e)}))),a.state={title:"Today's Todos",editMode:!1,titleChanged:!1},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){void 0===this.state.title&&this.setState({title:"Today's Todos",editMode:!1,titleChanged:!1})}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.editMode,a=e.titleChanged,n=this.props.currentUser;t?document.querySelector("#title-input").focus():n&&!t&&a&&this.updateTitle()}},{key:"render",value:function(){var e=this,t=this.state.title,a=this.state.editMode?r.a.createElement("input",{id:"title-input",type:"text",value:t,onBlur:this.handleClick,onChange:this.handleChange,onKeyPress:function(t){return e.keyPressHandler(t)},maxLength:"30",className:"".concat(this.state.title?"filled":"empty"),placeholder:"Feed me a title!"}):r.a.createElement("h1",{className:"title",onClick:this.handleClick},t||r.a.createElement("div",{className:"spinner-border text-secondary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")),this.props.currentUser?this.props.currentUser.userID===this.props.listAdmin?r.a.createElement("span",{id:"edit-title"},"\u270e"):null:r.a.createElement("span",{id:"edit-title"},"\u270e"));return r.a.createElement("div",{className:"title-container ".concat(this.props.currentUser?this.props.currentUser.userID===this.props.listAdmin?"admin":"":"admin")},a)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.currentUser?e.listName===t.title||t.titleChanged?null:{title:e.listName}:null}}]),t}(r.a.Component)),X=Object(c.b)((function(e){return{currentUser:e.user.currentUser}}))(Y),Z=a(31),$=(a(80),function(e){var t=e.children,a=e.isGoogleSignIn,n=e.inverted,s=Object(Z.a)(e,["children","isGoogleSignIn","inverted"]);return r.a.createElement("button",Object.assign({className:"".concat(n?"inverted":"","\n        ").concat(a?"google-sign-in":"","\n        custom-button btn btn-sm")},s),t)}),ee=(a(81),function(e){var t=e.handleChange,a=e.label,n=Object(Z.a)(e,["handleChange","label"]);return r.a.createElement("div",{className:"group"},r.a.createElement("input",Object.assign({className:"form-input",onChange:t},n)),a?r.a.createElement("label",{className:"".concat(n.value.length?"shrink":""," form-input-label")},a):null)}),te=(a(82),function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(k.a)(this,Object(D.a)(t).call(this,e))).cancelBtn=function(){a.setState({inviteEmail:"",emailError:!1})},a.handleChange=function(e){e.preventDefault();var t=e.target.value;a.setState({inviteEmail:t,emailError:!1})},a.handleSubmit=function(){document.querySelector("#emailError").classList.remove("animated","flash");var e=a.state.inviteEmail;e!==a.props.currentUser.email&&""!==e?(a.dbInviteUser(e),a.setState({inviteEmail:"",emailError:!1}),document.querySelector("#modal-close").click()):a.setState({emailError:!0},(function(){setTimeout((function(){document.querySelector("#emailError").classList.add("animated","flash")}))}))},a.keyPressHandler=function(e){a.state.inviteEmail!==a.props.currentUser.email?"Enter"===e.key&&(a.handleSubmit(),document.querySelector("#modal-close").click()):a.setState({emailError:!0})},a.dbInviteUser=function(){var e=Object(N.a)(y.a.mark((function e(t){var n,r,s,o,i,c,l,d,u,p;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=n.currentUser,s=r.id,o=r.displayName,i=r.email,c=r.invitesSent,l=n.todoListID,d=n.handleInvite,u=Object(G.a)({},l,{displayName:o,email:i}),e.prev=2,p=x.collection("users"),e.next=6,p.get();case 6:e.sent.docs.forEach(function(){var e=Object(N.a)(y.a.mark((function e(n){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.data().email!==t){e.next=19;break}if(!Object.keys(n.data().inviteIDs).includes(l)&&n.data().userID!==a.props.adminID){e.next=6;break}console.error("ERROR: Unable to send invite to this user."),d("error"),e.next=17;break;case 6:return p.doc(n.id).update({inviteIDs:Object(m.a)({},u,{},n.data().inviteIDs)}),d("success"),e.prev=8,r=x.doc("users/".concat(s)),e.next=12,r.get().then((function(){var e=c[t],a=[];a=void 0===e||e.includes(l)?[l]:[l].concat(Object(H.a)(e));var n=Object(m.a)({},c,Object(G.a)({},t,a));r.update({invitesSent:n})}));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),console.error("ERROR: Unable to update invites.");case 17:return setTimeout((function(){d(null)}),5e3),e.abrupt("return");case 19:case"end":return e.stop()}}),e,null,[[8,14]])})));return function(t){return e.apply(this,arguments)}}()),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),d(null),console.error("ERROR: Unable to invite user. Email not found.");case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),a.state={inviteEmail:"",emailError:!1},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"modal fade",id:"inviteUser",tabIndex:"-1",role:"dialog","aria-labelledby":"createList","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"inviteUserTitle"},"Invite to List"),r.a.createElement("button",{id:"modal-close",type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body",style:{paddingBottom:"0px"}},r.a.createElement(ee,{id:"userEmail",name:"userEmail",type:"email",value:this.state.inviteEmail,label:"User Email",handleChange:this.handleChange,onKeyPress:this.keyPressHandler,required:!0}),r.a.createElement("div",{id:"emailError",style:this.state.emailError?{display:"block"}:{display:"none"}},"Invalid email address. Please try again.")),r.a.createElement("div",{className:"modal-footer",style:{paddingTop:"0px",borderTop:"none"}},r.a.createElement("button",{type:"button",className:"btn btn-light",onClick:function(){return e.cancelBtn()},"data-dismiss":"modal"},"Cancel"),r.a.createElement("button",{type:"button",className:"btn btn-dark",onClick:function(){return e.handleSubmit()}},"Invite")))))}}]),t}(r.a.Component)),ae=Object(c.b)((function(e){return{currentUser:e.user.currentUser}}))(te),ne=(a(83),function(e){var t=e.type,a=function(){var e=document.querySelector("#toast-popup");setTimeout((function(){e.classList.remove("toast-".concat(t))}),4e3)};return Object(n.useEffect)((function(){var e=document.querySelector("#toast-popup");switch(t){case"success":return e.classList.add("toast-success"),void a();case"emailSent":return e.classList.add("toast-emailSent"),void a();case"passwordUpdated":return e.classList.add("toast-passwordUpdated"),void a();case"inviteAccepted":return e.classList.add("toast-inviteAccepted"),void a();case"listDeleted":return e.classList.add("toast-listDeleted"),void a();case"errorDeletingList":return e.classList.add("toast-errorDeletingList"),void a();case"error":return e.classList.add("toast-error"),void a()}})),r.a.createElement("div",{id:"toast-popup",className:"toast",role:"alert","aria-live":"assertive","aria-atomic":"true"},r.a.createElement("div",{className:"toast-body"},{success:"Your Invite Has Been Sent",emailSent:"Email Sent",passwordUpdated:"Password Updated",inviteAccepted:"List Joined",listDeleted:"Todo List Deleted",errorDeletingList:"Error Deleting List",error:"Error Sending Invite"}[t]))}),re=(a(84),function(e){function t(){var e,a;Object(w.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(k.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).loadingTypes={userLists:"Loading Lists",todoList:"Getting Todos",profilePage:"Grabbing Profile",contactPage:"Loading",signout:"Signing Out"},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){if("signout"!==e.props.message)return null;document.querySelector("#reset").click()}),2e3)}},{key:"render",value:function(){var e=this.props.message;return r.a.createElement("div",{className:"loading-container"},r.a.createElement("h1",{className:"animated pulse infinite"},this.loadingTypes[e]),r.a.createElement("div",null,r.a.createElement("div",{className:"spinner-border text-secondary big-spin",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),r.a.createElement(i.b,{id:"reset",to:"/todo-list"}))}}]),t}(r.a.Component)),se=a(49),oe=(a(85),function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(k.a)(this,Object(D.a)(t).call(this,e))).dragSrcIndex=null,a.fetchListData=function(){void 0!==a.props.location.state&&(a.unsubscribeFromList=x.collection("todoLists").doc("".concat(a.props.location.state.id)).onSnapshot((function(e){if(a.state.todos.length){if(a.state.todos.length<e.data().todos.length){var t=a.state.descending?[e.data().todos[0]].concat(Object(H.a)(a.state.todos)):[].concat(Object(H.a)(a.state.todos),[e.data().todos[0]]);a.setState(Object(m.a)({},e.data(),{todos:t}))}else if(a.state.todos.length>e.data().todos.length){var n=a.state.todos,r=[];e.data().todos.forEach((function(e){r.push(e.id)}));var s=n.filter((function(e){return r.includes(e.id)}));a.setState(Object(m.a)({},e.data(),{todos:s}))}else if(a.state.todos.length===e.data().todos.length){var o=a.state.todos,i=[];o.forEach((function(t){for(var a=0;a<o.length;a++)if(t.id===e.data().todos[a].id){i.push(e.data().todos[a]);break}})),a.setState(Object(m.a)({},e.data(),{todos:i}))}}else a.setState(Object(m.a)({},e.data()))})))},a.renderRedirect=function(){document.querySelector("#home").click()},a.setTodo=function(){var e=Object(N.a)(y.a.mark((function e(t,n){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a.state.todos.map((function(e){return e.id===t.id?Object(m.a)({},e,{text:n}):e})),a.setState({todos:r}),a.updateDB();case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a.addTodo=function(e){a.setState((function(t){return{todos:[e].concat(Object(H.a)(t.todos))}})),a.updateDB()},a.deleteTodo=function(e,t){if(a.state.loggedIn){var n=a.props.currentUser.userID,r=a.state.adminID;if(n!==t&&n!==r)return;a.setState((function(t){return{todos:t.todos.filter((function(t){return t.id!==e}))}})),a.updateDB(!0)}else a.setState((function(t){return{todos:t.todos.filter((function(t){return t.id!==e}))}}))},a.deleteCompleteTodos=function(){a.setState((function(e){return{todos:e.todos.filter((function(e){return!e.complete}))}})),a.updateDB(!0)},a.markAllComplete=function(){a.setState((function(e){return{todos:e.todos.map((function(e){return Object(m.a)({},e,{complete:!0})}))}})),a.updateDB()},a.setAllActive=function(){a.setState((function(e){return{todos:e.todos.map((function(e){return Object(m.a)({},e,{complete:!1})}))}})),a.updateDB()},a.filterTodos=function(e){a.setState({todoFilter:e.target.name})},a.reverseSortTodos=function(){a.setState((function(e){return{descending:!e.descending,todos:e.todos.reverse()}}))},a.toggleComplete=function(e){a.setState((function(t){return{todos:t.todos.map((function(t){return t.id===e&&(t.complete=!t.complete),t}))}})),a.updateDB()},a.handleInvite=function(e){a.setState({toastType:e})},a.handleListName=function(e){e!==a.state.listName&&a.setState({listName:e},(function(){return a.updateDB()}))},a.updateDB=function(){var e=Object(N.a)(y.a.mark((function e(){var t,n,r,s,o,i,c,l,d,u,m,p=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.length>0&&void 0!==p[0]&&p[0],a.state.loggedIn){e.next=3;break}return e.abrupt("return");case 3:return n=a.props.location.state.id,r=x.doc("todoLists/".concat(n)),e.next=7,r.get();case 7:if((s=e.sent).exists){e.next=12;break}return alert("List has been deleted."),a.renderRedirect(),e.abrupt("return");case 12:o=[],(i=a.state.todos).forEach((function(e){o.includes(e.id)||o.push(e.id)})),t||s.data().todos.forEach((function(e){o.includes(e.id)||(o.push(e.id),i.push(e))}));try{c=a.state,l=c.descending,d=c.listName,u=c.todoFilter,m=Date.now(),r.update({descending:l,listName:d,todoFilter:u,todos:i.map((function(e){return e})),lastUpdated:m})}catch(h){console.log("Error deleting todo",h.message)}case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a.handleDragStart=function(e){a.state.updating||(e.currentTarget.style.opacity="0.4",a.dragSrcIndex=e.currentTarget.id,e.dataTransfer.effectAllowed="move")},a.handleDragOver=function(e){return e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="move",!1},a.handleDragEnter=function(e){e.stopPropagation(),e.preventDefault(),console.log(e.currentTarget),e.target.classList[0].includes("material-icons")&&e.target.classList.add("over")},a.handleDragLeave=function(e){e.stopPropagation(),e.preventDefault(),e.target.classList.remove("over")},a.handleDrop=function(e){if(e.stopPropagation(),e.preventDefault(),a.dragSrcIndex!==e.currentTarget.id){var t=a.state.todos,n=t[a.dragSrcIndex];t[a.dragSrcIndex]=t[e.currentTarget.id],t[e.currentTarget.id]=n,a.setState({todos:t})}return!1},a.handleDragEnd=function(e){e.stopPropagation(),e.preventDefault(),e.currentTarget.style.opacity=1,document.querySelectorAll(".material-icons").forEach((function(e){e.classList.remove("over")}))},a.state={allTodos:[],todos:[],todoFilter:"all",descending:!0,toastType:null,lastUpdated:null,isLoaded:!1,loggedIn:!1,contributorIDs:[],activeContributors:[],id:a.currentUser?a.props.location.state.id:null,todoSearch:""},a.unsubscribeFromList=function(){return null},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.fetchListData(),this.props.currentUser||"/todo-list"===this.props.match.url&&setTimeout((function(){e.setState({isLoaded:!0})}),1e3)}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props.currentUser,a=this.props.match.params.userID;if(t){if(t.userID!==a||!t.todoListIDs.includes(this.state.id))return void this.renderRedirect();this.state.loggedIn||this.state.isLoaded||this.setState({loggedIn:!0,isLoaded:!0},Object(N.a)(y.a.mark((function a(){var n,r,s;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=x.doc("todoLists/".concat(e.state.id)),a.next=3,n.get();case 3:r=a.sent,(s=Object(H.a)(r.data().activeContributors)).includes(t.userID)||s.push(t.userID),n.update({activeContributors:s}).then((function(){e.setState({activeContributors:s})}));case 7:case"end":return a.stop()}}),a)}))))}}},{key:"componentWillUnmount",value:function(){!this.state.loggedIn&&this.props.currentUser&&this.props.currentUser&&this.unsubscribeFromList()}},{key:"render",value:function(){var e=this;console.log(this.state.todos);var t=document.querySelectorAll(".todo-container");[].forEach.call(t,(function(t){t.addEventListener("dragstart",e.handleDragStart,!1),t.addEventListener("dragenter",e.handleDragEnter,!1),t.addEventListener("dragover",e.handleDragOver,!1),t.addEventListener("dragleave",e.handleDragLeave,!1),t.addEventListener("drop",e.handleDrop,!1),t.addEventListener("dragend",e.handleDragEnd,!1)}));var a=[],n=this.state.todos.some((function(e){return e.complete}))?r.a.createElement("button",{className:"dropdown-item",onClick:this.deleteCompleteTodos},"Clear Completed"):r.a.createElement("button",{className:"dropdown-item",disabled:!0},"Clear Completed"),s=this.state.todos.some((function(e){return!e.complete}))?r.a.createElement("button",{className:"dropdown-item",onClick:this.markAllComplete},"Mark All Complete"):r.a.createElement("button",{className:"dropdown-item",disabled:!0},"Mark All Complete"),o=this.state.todos.some((function(e){return e.complete}))?r.a.createElement("button",{className:"dropdown-item",onClick:this.setAllActive},"Set All Active"):r.a.createElement("button",{className:"dropdown-item",disabled:!0},"Set All Active"),c=r.a.createElement("button",{className:"dropdown-item",onClick:function(){return e.reverseSortTodos()}},"Reverse Sort",this.state.descending?r.a.createElement("span",{id:"sort-arrow"},"\u21e1"):r.a.createElement("span",{id:"sort-arrow"},"\u21e3")),l=r.a.createElement("div",{className:"btn-group btn-container",role:"group"},r.a.createElement("button",{id:"bulk-actions-dropdown",type:"button",className:"btn btn-sm btn-secondary dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Bulk Actions"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"btnGroupDrop1"},c,s,o,n));switch(this.state.todoFilter){case"active":a=this.state.todos.filter((function(e){return!e.complete}));break;case"completed":a=this.state.todos.filter((function(e){return e.complete}));break;default:a=this.state.todos}return this.state.isLoaded?r.a.createElement("div",{className:"list-page-container"},this.props.currentUser?r.a.createElement("div",{className:"contributor-count","data-tip":"Currently Active Users"},this.state.activeContributors.length,r.a.createElement(se.a,{place:"left"})):null,r.a.createElement(X,{listID:this.state.id,listName:this.state.listName,listAdmin:this.state.adminID,handleListName:this.handleListName}),r.a.createElement(z,{onSubmit:this.addTodo}),r.a.createElement("div",{className:"filter-buttons"},r.a.createElement("div",null,r.a.createElement("span",null,"Show:"),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{className:"btn btn-sm ".concat("all"===this.state.todoFilter?"btn-secondary":"btn-outline-secondary"),name:"all",onClick:this.filterTodos},"All"),r.a.createElement("button",{className:"btn btn-sm ".concat("active"===this.state.todoFilter?"btn-secondary":"btn-outline-secondary"),name:"active",onClick:this.filterTodos},"Active"),r.a.createElement("button",{className:"btn btn-sm ".concat("completed"===this.state.todoFilter?"btn-secondary":"btn-outline-secondary"),name:"completed",onClick:this.filterTodos},"Completed"))),r.a.createElement("div",{className:"bulk-actions bulk-actions-dropdown"},l),r.a.createElement("div",{className:"form-inline my-2 my-lg-0 search-input"},r.a.createElement("input",{className:"form-control mr-sm-2",type:"search",placeholder:"Search Lists","aria-label":"Search",onChange:function(t){t.preventDefault(),e.setState({todoSearch:t.target.value})}}),r.a.createElement("i",{className:"material-icons mag-glass"},"search"))),r.a.createElement("div",{className:"todo-list-container"},a.map((function(t,a){return t.text.toLowerCase().includes(e.state.todoSearch.toLowerCase())?r.a.createElement("div",{id:a,key:a,className:"single-todo-container",draggable:"true",onDragStart:e.handleDragStart,onDragOver:e.handleDragOver,onDragEnter:e.handleDragEnter,onDragLeave:e.handleDragLeave,onDragEnd:e.handleDragEnd,onDrop:e.handleDrop,updating:e.state.updating},r.a.createElement(V,{key:t.id,todoId:t.id,deleteTodo:function(){return e.deleteTodo(t.id,t.contributorID)},toggleComplete:function(){return e.toggleComplete(t.id)},todo:t,contributorID:t.contributorID,adminID:e.state.adminID,listID:e.state.id,setTodo:e.setTodo,textValue:t.text,index:a})):null}))),r.a.createElement("div",{className:"more-todos",style:a.length>6?{display:"block"}:{display:"none"}},r.a.createElement("span",{role:"img","aria-label":"additional-items","aria-labelledby":"additional-items"},"\u26ab")),r.a.createElement("div",{className:"active-todos"},"Still Todos: ",this.state.todos.filter((function(e){return!e.complete})).length,this.props.currentUser?this.props.currentUser.userID===this.state.adminID?r.a.createElement("div",{className:"list-extras"},r.a.createElement($,{className:"invite-btn btn btn-outline-dark","data-toggle":"modal","data-target":"#inviteUser",onClick:function(){return setTimeout((function(){return document.querySelector("#userEmail").focus()}),500)}},"Invite to List"),r.a.createElement(ae,{handleInvite:this.handleInvite,todoListID:this.state.id,adminID:this.state.adminID})):null:r.a.createElement("div",{className:"list-extras"},r.a.createElement(i.b,{className:"sign-btn btn btn-outline-dark",to:"/signin"},"Sign Up"),r.a.createElement("span",null,"* Sign Up to Save Your Lists"))),r.a.createElement("div",{className:"toast-container"},null!==this.state.toastType?r.a.createElement(ne,{type:this.state.toastType}):null)):this.props.currentUser?r.a.createElement(re,{message:"todoList"}):r.a.createElement(re,{message:"contactPage"})}}]),t}(r.a.Component)),ie=Object(c.b)((function(e){return{currentUser:e.user.currentUser}}))(oe),ce=(a(86),function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(k.a)(this,Object(D.a)(t).call(this,e))).handleSubmit=Object(N.a)(y.a.mark((function e(){var t,n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.inputName,n=a.props.currentUser.id,r=x.doc("users/".concat(n)),e.next=5,r.get();case 5:if(e.sent.exists)try{r.update({displayName:t})}catch(s){console.error("ERROR: Unable to update display name."),a.setState({showError:!0,errorMsg:s.message})}case 7:case"end":return e.stop()}}),e)}))),a.handleChange=function(e){var t=e.target.value;a.setState({inputName:t})},a.handleClick=function(e){switch(e.preventDefault(),e.target.name){case"edit":return void a.setState({editMode:!0},(function(){document.querySelector("#edit-name-input").focus()}));case"save":return void a.setState((function(e){return{inputName:e.inputName,setName:e.inputName,editMode:!1}}),(function(){a.handleSubmit()}));case"cancel":return void a.setState((function(e){return{inputName:e.setName,editMode:!1}}));default:return void console.error("ERROR: Uh oh! Something went wrong. Please try again.")}},a.keyPressHandler=function(e){""!==a.state.inputName&&"Enter"===e.key&&a.handleClick(e)},a.state={inputName:a.props.currentUser.displayName,setName:a.props.currentUser.displayName,editMode:!1,showError:!1,errorMsg:""},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"change-name"},r.a.createElement("h2",{className:"title"},"Change Username"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(ee,{id:"edit-name-input",name:"save",type:"text",maxLength:15,value:this.state.inputName,label:"Username",handleChange:this.handleChange,onKeyPress:function(t){return e.keyPressHandler(t)},style:this.state.editMode?{fontWeight:"bold"}:null,required:!0,disabled:!this.state.editMode}),r.a.createElement("div",{className:"buttons"},r.a.createElement("div",{className:"edit-name"},this.state.editMode?r.a.createElement("button",{className:"btn btn-light edit-name-btn",name:"cancel",onClick:this.handleClick},"Cancel"):null,r.a.createElement("button",{type:"submit",className:"btn btn-dark edit-name-btn",name:this.state.editMode?"save":"edit",onClick:this.handleClick,disabled:(""===this.state.inputName||this.state.inputName===this.state.setName)&&this.state.editMode},this.state.editMode?"Save":"Edit")))),this.state.showError?r.a.createElement("span",{id:"error-message",className:"animated pulse infinite"},this.state.errorMsg):null)}}]),t}(r.a.Component)),le=Object(c.b)((function(e){return{currentUser:e.user.currentUser}}))(ce),de=(a(87),function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(k.a)(this,Object(D.a)(t).call(this,e))).handleSubmit=Object(N.a)(y.a.mark((function e(){var t,n,r,s,o,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({loading:!0}),t=a.state,n=t.passwordUpdateRequired,r=t.currentPassword,s=t.newPassword,o=j.currentUser,n){e.next=15;break}i=null;try{i=R.auth.EmailAuthProvider.credential(o.email,r)}catch(c){console.error("User Token Expired. Please try again."),console.error(c.message),o.refreshToken()}return e.prev=6,e.next=9,o.reauthenticateWithCredential(i);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(6),a.setState({showError:!0,errorMsg:"Passwords do not match. Please try again.",toastType:null,loading:!1}),e.abrupt("return");case 15:o.updatePassword(s).then((function(){a.setState({currentPassword:"***************",newPassword:"",confirmNewPassword:"",editMode:!1,showError:!1,errorMsg:"",toastType:"passwordUpdated",passwordUpdateRequired:!1,loading:!1}),console.log("Password saved.")})).catch((function(e){console.error("ERROR: Unable to update password."),a.setState({showError:!0,errorMsg:e.message,toastType:null,loading:!1})}));case 16:case"end":return e.stop()}}),e,null,[[6,11]])}))),a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(G.a)({},n,r))},a.handleClick=function(e){switch(e.preventDefault(),e.target.name){case"edit":return void a.setState({currentPassword:a.state.passwordUpdateRequired?"***************":"",editMode:!0,toastType:null},(function(){document.querySelector("#current-password-input").focus()}));case"save":var t=a.state;return t.newPassword!==t.confirmNewPassword?void a.setState({showError:!0,errorMsg:"Passwords do not match. Please try again.",toastType:null}):void a.handleSubmit();case"cancel":return void a.setState({currentPassword:"***************",newPassword:"",confirmNewPassword:"",editMode:!1,toastType:null});default:return void console.error("ERROR: Uh oh! Something went wrong. Please try again.")}},a.keyPressHandler=function(e){""!==a.state.inputName&&"Enter"===e.key&&a.handleClick(e)},a.state={currentPassword:"***************",newPassword:"",confirmNewPassword:"",editMode:!1,showError:!1,errorMsg:"",toastType:null,passwordUpdateRequired:!1,loading:!1},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.props.passwordUpdateRequired&&this.setState({passwordUpdateRequired:!0,editMode:!0,showError:!0,errorMsg:"Please set your new password."})}},{key:"render",value:function(){var e=this.state,t=e.currentPassword,a=e.newPassword,n=e.confirmNewPassword;return r.a.createElement("div",{className:"change-password-container"},r.a.createElement("h2",{className:"title"},"Change Password"),r.a.createElement("form",{className:"change-password-form",onSubmit:this.handleSubmit},r.a.createElement(ee,{id:"current-password-input",name:"currentPassword",type:"password",value:t,label:"Current Password",handleChange:this.handleChange,disabled:!this.state.editMode||this.state.passwordUpdateRequired,required:!0}),r.a.createElement(ee,{name:"newPassword",type:"password",value:a,label:"New Password",handleChange:this.handleChange,disabled:!this.state.editMode,required:!0}),r.a.createElement(ee,{name:"confirmNewPassword",type:"password",value:n,label:"Confirm New Password",handleChange:this.handleChange,disabled:!this.state.editMode,required:!0}),r.a.createElement("div",{className:"buttons"},r.a.createElement("div",{className:"change-password"},this.state.editMode?r.a.createElement("button",{className:"btn btn-light change-password-btn",name:"cancel",onClick:this.handleClick},"Cancel"):null,this.state.loading?r.a.createElement("button",{className:"btn btn-dark change-password-btn pw-spinner",disabled:!0},r.a.createElement("div",{className:"spinner-border spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))):r.a.createElement("button",{type:"submit",className:"btn btn-dark change-password-btn",name:this.state.editMode?"save":"edit",onClick:this.handleClick,disabled:(""===t||""===a||""===n||a.length!==n.length)&&this.state.editMode},this.state.editMode?"Confirm":"Change Password")))),this.state.showError?r.a.createElement("span",{id:"error-message",className:"animated pulse infinite"},this.state.errorMsg):null,r.a.createElement("div",{className:"toast-container"},null!==this.state.toastType?r.a.createElement(ne,{type:this.state.toastType}):null))}}]),t}(r.a.Component)),ue=Object(c.b)((function(e){return{currentUser:e.user.currentUser}}))(de),me=(a(88),Object(c.b)((function(e){return{currentUser:e.user.currentUser}}))((function(e){var t=Object(n.useState)({isLoaded:!1}),a=Object(Q.a)(t,2),s=a[0],o=a[1];Object(n.useEffect)((function(){setTimeout((function(){o({isLoaded:!0})}),500)}));var i=s.isLoaded;return r.a.createElement("div",{className:"profile-page"},e.currentUser&&i?e.currentUser.userID===e.match.params.userID?r.a.createElement("div",{className:"profile-page-container"},r.a.createElement(le,null),r.a.createElement(ue,{passwordUpdateRequired:!!e.location.state&&e.location.state.passwordUpdateRequired})):r.a.createElement(C.a,{to:"/user/".concat(e.currentUser.userID,"/todo-lists")}):r.a.createElement(re,{message:"profilePage"}))}))),pe=(a(89),function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(k.a)(this,Object(D.a)(t).call(this,e))).handleSubmit=function(){var e=Object(N.a)(y.a.mark((function e(t){var n,r,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!a.state.loading){e.next=3;break}return e.abrupt("return");case 3:return n=a.state,r=n.email,s=n.password,e.prev=4,e.next=7,j.signInWithEmailAndPassword(r,s);case 7:a.setState({email:"",password:"",showError:!1,loading:!0}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),console.log(e.t0),a.setState({showError:!0,errorMsg:e.t0.message.slice(0,e.t0.message.indexOf(".")+1),loading:!1});case 14:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){var t=e.target,n=t.value,r=t.name;a.setState(Object(G.a)({},r,n))},a.handleClick=function(){var e=Object(N.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=t.target.name,e.t0=n,e.next="send-email"===e.t0?5:"cancel"===e.t0?9:11;break;case 5:return e.next=7,T(a.state.email);case 7:return a.setState({password:"",toastType:"emailSent"},(function(){document.querySelector("#modal-close").click()})),e.abrupt("return");case 9:return a.setState({email:"",password:""}),e.abrupt("return");case 11:return console.error("ERROR: Uh oh! Something went wrong. Please try again."),e.abrupt("return");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={email:"",password:"",toastType:null,showError:!1,errorMsg:"",updatePassword:!1,loading:!1},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(j.isSignInWithEmailLink(window.location.href)){var t=localStorage.getItem("emailForSignIn");t||(t=prompt("Please provide your email for confirmation")),this.setState({email:t}),j.signInWithEmailLink(t,window.location.href).then((function(){localStorage.removeItem("emailForSignIn"),e.setState({updatePassword:!0})})).catch((function(e){console.error("ERROR: Unable to verify user."),console.error(e.message)}))}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"sign-in"},r.a.createElement("h2",{className:"title"},"I already have an account"),r.a.createElement("span",null,"Sign in with your email and password"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(ee,{name:"email",type:"email",value:this.state.email,label:"Email",handleChange:this.handleChange,required:!0}),r.a.createElement(ee,{name:"password",type:"password",value:this.state.password,label:"Password",handleChange:this.handleChange,required:!0}),r.a.createElement("div",{className:"buttons"},r.a.createElement("div",{className:"sign-in-btn"},this.state.loading?r.a.createElement("button",{className:"btn btn-dark change-password-btn spinner-btn",disabled:!0},r.a.createElement("div",{className:"spinner-border spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))):r.a.createElement($,{style:{width:"45%"},type:"submit"},"Sign In")),r.a.createElement("div",{className:"google-sign-in-btn"},r.a.createElement($,{style:{width:"65%"},onClick:M,isGoogleSignIn:!0},"Sign In with Google"))),r.a.createElement("div",{className:"forgot-password"},r.a.createElement(i.b,{to:"#",className:"forgot-password-link","data-toggle":"modal","data-target":"#forgotPasswordModal"},"Forgot Password?"))),this.state.showError?r.a.createElement("span",{id:"error-message",className:"animated pulse infinite"},this.state.errorMsg):null,r.a.createElement("div",{className:"forgot-password-modal"},r.a.createElement("div",{className:"modal fade",id:"forgotPasswordModal",tabIndex:"-1",role:"dialog","aria-labelledby":"createList","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"createListTitle"},"Enter Email Address"),r.a.createElement("button",{id:"modal-close",type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body",style:{paddingBottom:"0px"}},r.a.createElement(ee,{id:"forgotEmailInput",name:"email",type:"text",value:this.state.email,label:"Email",handleChange:this.handleChange,onKeyPress:function(t){return e.keyPressHandler(t)},required:!0}),r.a.createElement("div",{className:"required-field"},"* Required")),r.a.createElement("div",{className:"modal-footer",style:{paddingTop:"0px",borderTop:"none"}},r.a.createElement("button",{type:"button",name:"cancel",className:"btn btn-light","data-dismiss":"modal",onClick:this.handleClick},"Cancel"),r.a.createElement("button",{type:"button",name:"send-email",className:"btn btn-dark",onClick:this.handleClick},"Send")))))),r.a.createElement("div",{className:"toast-container"},null!==this.state.toastType?r.a.createElement(ne,{type:this.state.toastType}):null))}}]),t}(r.a.Component)),he=(a(90),function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(k.a)(this,Object(D.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.setState({loading:!0},(function(){setTimeout(Object(N.a)(y.a.mark((function e(){var t,n,r,s,o,i,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state,n=t.displayName,r=t.email,s=t.password,o=t.confirmPassword,s===o){e.next=4;break}return a.setState({showError:!0,errorMsg:"Passwords do not match. Please try again.",loading:!1}),e.abrupt("return");case 4:return e.prev=4,e.next=7,j.createUserWithEmailAndPassword(r,s);case 7:return i=e.sent,c=i.user,e.next=11,I(c,{displayName:n});case 11:a.setState({displayName:"",email:"",password:"",confirmPassword:"",loading:!1}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(4),console.error(e.t0),a.setState({showError:!0,errorMsg:e.t0.message,loading:!1});case 18:case"end":return e.stop()}}),e,null,[[4,14]])}))),2e3)}))},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(G.a)({},n,r))},a.state={displayName:"",email:"",password:"",confirmPassword:"",showError:!1,errorMsg:"",loading:!1},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.state,t=e.displayName,a=e.email,n=e.password,s=e.confirmPassword;return r.a.createElement("div",{className:"sign-up"},r.a.createElement("h2",{className:"title"},"I do not have an account"),r.a.createElement("span",null,"Sign up with your email and password"),r.a.createElement("form",{className:"sign-up-form",onSubmit:this.handleSubmit},r.a.createElement(ee,{name:"displayName",type:"text",maxLength:15,value:t,label:"Username",handleChange:this.handleChange,required:!0}),r.a.createElement(ee,{name:"email",type:"email",value:a,label:"Email",handleChange:this.handleChange,required:!0}),r.a.createElement(ee,{name:"password",type:"password",value:n,label:"Password",handleChange:this.handleChange,required:!0}),r.a.createElement(ee,{name:"confirmPassword",type:"password",value:s,label:"Confirm Password",handleChange:this.handleChange,required:!0}),r.a.createElement("div",{className:"buttons"},r.a.createElement("div",{className:"sign-up-btn"},this.state.loading?r.a.createElement("button",{className:"btn btn-dark change-password-btn spinner-btn",disabled:!0},r.a.createElement("div",{className:"spinner-border spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))):r.a.createElement($,{type:"submit"}," Sign Up ")))),this.state.showError?r.a.createElement("span",{id:"error-message",className:"animated pulse infinite"},this.state.errorMsg):null)}}]),t}(r.a.Component)),fe=(a(91),function(){return r.a.createElement("div",{className:"sign-in-and-sign-up"},r.a.createElement(pe,null),r.a.createElement(he,null))}),be=(a(92),function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(k.a)(this,Object(D.a)(t).call(this,e))).initialize=function(){a.getLists().then((function(e){var t=e.filter((function(e){return a.props.currentUser.todoListIDs.includes(e.id)||Object.keys(a.props.currentUser.inviteIDs).includes(e.id)}));t.sort((function(e,t){return t.createdAt-e.createdAt}));var n=Object(m.a)({},a.props.currentUser.inviteIDs);setTimeout((function(){a.setState({todoLists:t,invitedLists:n,isLoaded:!0,deleting:!1})}),500)}))},a.createTodoList=function(){""!==a.state.listName&&a.setState({loading:!0},(function(){setTimeout(Object(N.a)(y.a.mark((function e(){var t,n,r,s,o,i,c,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.currentUser){e.next=14;break}return t=a.props.currentUser,n=t.id,r=t.userID,s=t.todoListIDs,o=t.displayName,i=J.a.generate().substr(0,4),c=x.doc("todoLists/".concat(i)),e.next=6,c.get();case 6:if(e.sent.exists){e.next=14;break}l=Date.now();try{c.set({id:i,adminID:r,createdBy:o,contributorIDs:[n],activeContributors:[],listName:a.state.listName,todos:[],todoFilter:"all",descending:!0,createdAt:l,lastUpdated:l})}catch(d){console.error("ERROR: Unable to create todo list",d.message)}return document.querySelector("#modal-close").click(),a.getLists().then((function(e){var t=e.filter((function(e){return a.props.currentUser.todoListIDs.includes(e.id)||Object.keys(a.props.currentUser.inviteIDs).includes(e.id)}));t.sort((function(e,t){return t.createdAt-e.createdAt}));var n=Object(m.a)({},a.props.currentUser.inviteIDs);a.setState({listName:"",todoLists:t,invitedLists:n,loading:!1})})),a.updateUserTodoIDs(n,i,s),e.abrupt("return",c);case 14:case"end":return e.stop()}}),e)}))),1500)}))},a.getLists=Object(N.a)(y.a.mark((function e(){var t,n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=x.collection("todoLists"),e.next=4,n.get();case 4:return r=e.sent,r.docs.forEach(function(){var e=Object(N.a)(y.a.mark((function e(n){var r,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.unshift(n.data()),r=x.doc("todoLists/".concat(n.id)),e.next=4,r.get();case 4:s=e.sent,r.update({activeContributors:s.data().activeContributors.filter((function(e){return e!==a.props.currentUser.userID}))});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)}))),a.updateUserTodoIDs=function(){var e=Object(N.a)(y.a.mark((function e(t,n,r){var s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=x.doc("users/".concat(t)),e.next=3,s.get();case 3:if(e.sent.exists)try{s.update({todoListIDs:[].concat(Object(H.a)(r),[n])}).then((function(){a.updateContributors(n)}))}catch(o){console.error("ERROR: Unable to update todo lists",o.message)}case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),a.handleChange=function(e){e.preventDefault();var t=e.target.value;a.setState({listName:t})},a.keyPressHandler=function(e){""!==a.state.listName&&"Enter"===e.key&&a.createTodoList()},a.handleInvite=function(){var e=Object(N.a)(y.a.mark((function e(t,n){var r,s,o,i,c,l,d;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.props.currentUser,s=r.id,o=r.inviteIDs,i=r.todoListIDs,c=[],l={},d=x.doc("users/".concat(s)),e.next=6,d.get().then((function(){delete(l=o)[n],"accept"===t?(c=[n].concat(Object(H.a)(i)),a.updateContributors(n),a.setState({toastType:"inviteAccepted"})):c=Object(H.a)(i),d.update({todoListIDs:c,inviteIDs:l})}));case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a.searchLists=function(e){a.setState({listSearch:e})},a.handleDelete=function(e){var t=document.querySelector('div[id="'.concat(e.target.id,'"]'));t.classList.add("deleting"),e.target.classList.add("deleting");try{x.doc("todoLists/".concat(e.target.id)).delete().then((function(){setTimeout((function(){a.setState({toastType:"listDeleted",deleting:!0},(function(){setTimeout((function(){a.initialize()}),3e3)}))}),2500)}))}catch(n){a.setState({toastType:"errorDeletingList",deleting:!1}),t.classList.remove("deleting"),e.target.classList.remove("deleting"),console.error("ERROR: Unable to delete todo list."),console.error(n.message)}},a.updateContributors=function(){var e=Object(N.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.currentUser.id,r=x.doc("todoLists/".concat(t)),e.next=4,r.get().then((function(e){if(!e.data().contributorIDs.includes(n)){var t=[].concat(Object(H.a)(e.data().contributorIDs),[n]);r.update({contributorIDs:t})}}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={listName:"",todoLists:[],invitedLists:{},isLoaded:!1,toastType:null,listSearch:"",loading:!1,deleting:!1},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.props.currentUser?this.initialize():this.setState({isLoaded:!1})}},{key:"componentDidUpdate",value:function(e){var t=this;e.currentUser!==this.props.currentUser&&this.getLists().then((function(e){var a=e.filter((function(e){return t.props.currentUser.todoListIDs.includes(e.id)||Object.keys(t.props.currentUser.inviteIDs).includes(e.id)}));a.sort((function(e,t){return t.createdAt-e.createdAt}));var n=Object(m.a)({},t.props.currentUser.inviteIDs);t.setState({todoLists:a,invitedLists:n,isLoaded:!0})})),this.state.toastType&&setTimeout((function(){t.setState({toastType:null})}),4500)}},{key:"render",value:function(){var e=this,t=this.props.match,a=this.state,n=a.listName,s=a.todoLists,o=a.invitedLists,c=s.map((function(a){return a.listName.toLowerCase().includes(e.state.listSearch.toLocaleLowerCase())?r.a.createElement("div",{key:a.id,id:a.id,className:"todo-list-div"},r.a.createElement("div",{className:"todo-lists-container"},r.a.createElement(i.b,{listid:a.id,to:e.state.deleting?"#":{pathname:Object.keys(o).includes(a.id)?"".concat(t.url):"".concat(t.url,"/todo-list/").concat(a.id),state:Object(m.a)({},a)},className:Object.keys(o).includes(a.id)?"invited":""},r.a.createElement("span",{className:"dot"},"\u270f "),a.listName),Object.keys(o).includes(a.id)?r.a.createElement("div",{className:"invite-options"},r.a.createElement(i.b,{to:"#",className:"badge badge-success accept",onClick:function(){return e.handleInvite("accept",a.id)}},"Accept"),r.a.createElement(i.b,{to:"#",className:"badge badge-danger decline",onClick:function(){return e.handleInvite("decline",a.id)}},"Decline")):null),r.a.createElement("div",{className:"list-details"},"Created by ".concat(a.createdBy," on ").concat(new Date(a.createdAt).toLocaleDateString()),e.props.currentUser&&e.props.currentUser.userID===a.adminID?r.a.createElement("i",{id:a.id,className:"material-icons delete-todo-list",onClick:e.state.deleting?null:e.handleDelete},"delete"):null)):null}));return this.state.isLoaded?r.a.createElement("div",{className:"lists-container"},r.a.createElement("div",{className:"list-header"},r.a.createElement("h2",{className:"user-greeting"},"Hello, ".concat(this.props.currentUser?this.props.currentUser.displayName:"there","!"))),r.a.createElement("div",{className:"user-todo-lists"},r.a.createElement("div",{className:"active-todo-lists-title"},r.a.createElement("h4",null,"Active ToDo Lists:"),r.a.createElement("div",{className:"form-inline my-2 my-lg-0 list-search"},r.a.createElement("input",{className:"form-control mr-sm-2",type:"search",placeholder:"Search Lists","aria-label":"Search",onChange:function(t){t.preventDefault(),e.setState({listSearch:t.target.value})}}),r.a.createElement("i",{className:"material-icons mag-glass"},"search"))),r.a.createElement("div",{className:"listed-todo-lists"},r.a.createElement("div",{className:"lists"},c))),r.a.createElement("div",{className:"add-todo-list-btn"},r.a.createElement($,{"data-toggle":"modal","data-target":"#createList",onClick:function(){return setTimeout((function(){return document.querySelector("#newListName").focus()}),500)},style:this.state.toastType?{opacity:.1}:{transition:"opacity 1s",opacity:1}},"Add New Todo List"),r.a.createElement("div",{className:"modal fade",id:"createList",tabIndex:"-1",role:"dialog","aria-labelledby":"createList","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"createListTitle"},"Create New Todo List"),r.a.createElement("button",{id:"modal-close",type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body",style:{paddingBottom:"0px"}},r.a.createElement(ee,{id:"newListName",name:"listName",type:"text",value:n,label:"List Name",handleChange:this.handleChange,onKeyPress:function(t){return e.keyPressHandler(t)},maxLength:35,required:!0}),r.a.createElement("div",{className:"required-field"},"* Required")),r.a.createElement("div",{className:"modal-footer",style:{paddingTop:"0px",borderTop:"none"}},r.a.createElement("div",{className:"max-characters"},"".concat(this.state.listName.length," characters (maximum 35 characters)")),r.a.createElement("button",{type:"button",className:"btn btn-light","data-dismiss":"modal"},"Cancel"),this.state.loading?r.a.createElement("button",{className:"btn btn-dark change-password-btn spinner-btn",disabled:!0},r.a.createElement("div",{className:"spinner-border spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))):r.a.createElement("button",{type:"button",className:"btn btn-dark",onClick:this.state.loading?null:function(){return e.createTodoList()}},"Create")))))),r.a.createElement("div",{className:"toast-container"},null!==this.state.toastType?r.a.createElement(ne,{type:this.state.toastType}):null)):r.a.createElement(re,{message:"userLists"})}}]),t}(r.a.Component)),ve=Object(c.b)((function(e){return{currentUser:e.user.currentUser}}))(be),ge=(a(93),function(e){return r.a.createElement("div",{className:"reset-password-container"},r.a.createElement("h2",null,"Set New Password"))}),Ee=(a(94),function(){return r.a.createElement(re,{message:"signout"})}),ye=(a(95),function(){var e=Object(n.useState)({isLoaded:!1}),t=Object(Q.a)(e,2),a=t[0],s=t[1];return Object(n.useEffect)((function(){setTimeout((function(){s({isLoaded:!0})}),1e3)})),r.a.createElement("div",null,a.isLoaded?null:r.a.createElement(re,{message:"contactPage"}),r.a.createElement("div",{className:"contact-page-container",style:a.isLoaded?{visibility:"visible"}:{visibility:"hidden"}},r.a.createElement("div",{className:"contact-title"},r.a.createElement("h1",null,"Who Are We?")),r.a.createElement("div",{className:"contact-card-container"},r.a.createElement("div",{className:"contact-card"},r.a.createElement("div",{className:"contact-photo"},r.a.createElement("div",{id:"nbernstein",className:"contact-image",style:{backgroundImage:"url('http://drive.google.com/uc?export=view&id=1yIkygBaoW-YL6yN_47dV6WRW-NUQWQPQ')"}})),r.a.createElement("div",{className:"contact-info"},r.a.createElement("h2",null,"Nick Bernstein"),r.a.createElement("span",null,"nbernstein@callutheran.edu"))),r.a.createElement("div",{className:"contact-card"},r.a.createElement("div",{className:"contact-photo"},r.a.createElement("div",{id:"sjohnson",className:"contact-image",style:{backgroundImage:"url('http://drive.google.com/uc?export=view&id=1B4egLoQILOI_uLduHNlIcJ121BHPCy87')"}})),r.a.createElement("div",{className:"contact-info"},r.a.createElement("h2",null,"Steven Johnson"),r.a.createElement("span",null,"stevenjohnson@callutheran.edu"))),r.a.createElement("div",{className:"contact-card"},r.a.createElement("div",{className:"contact-photo"},r.a.createElement("div",{id:"jobryan",className:"contact-image",style:{backgroundImage:"url('http://drive.google.com/uc?export=view&id=15l-sd33mipMC2je1_8_wAI0JT595DmSn')"}})),r.a.createElement("div",{className:"contact-info"},r.a.createElement("h2",null,"Jacob O'Bryan"),r.a.createElement("span",null,"jobryan@callutheran.edu"))))))}),Ne=(a(96),function(e){function t(){var e,a;Object(w.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(k.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).unsubscribeFromAuth=null,a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.passwordUpdateRequired=j.isSignInWithEmailLink(window.location.href);var e=this.props.setCurrentUser;this.unsubscribeFromAuth=j.onAuthStateChanged(function(){var t=Object(N.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=7;break}return t.next=3,I(a);case 3:t.sent.onSnapshot((function(t){e(Object(m.a)({id:t.id},t.data()))})),t.next=8;break;case 7:e(a);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromAuth()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(W,null),r.a.createElement(C.d,null,r.a.createElement(C.b,{exact:!0,path:"/todo-list/signin",render:function(){return e.props.currentUser?j.isSignInWithEmailLink(window.location.href)?r.a.createElement(C.a,{to:{pathname:"/todo-list/user/".concat(e.props.currentUser.userID,"/profile"),state:{passwordUpdateRequired:!0}}}):r.a.createElement(C.a,{to:"/todo-list/user/".concat(e.props.currentUser.userID,"/todo-lists")}):r.a.createElement(fe,null)}}),r.a.createElement(C.b,{exact:!0,path:"/todo-list/user/:userID/profile",component:me}),r.a.createElement(C.b,{exact:!0,path:"/todo-list/user/:userID/todo-lists",component:ve}),r.a.createElement(C.b,{exact:!0,path:"/todo-list/contact",component:ye}),r.a.createElement(C.b,{exact:!0,path:"/todo-list/user/:userID/todo-lists/todo-list/:todoListID",component:ie}),r.a.createElement(C.b,{exact:!0,path:"/todo-list/signout",component:Ee}),r.a.createElement(C.b,{exact:!0,path:"/todo-list/reset-password/:userEmail",component:ge}),r.a.createElement(C.b,{path:"/todo-list",component:ie}),"/>"))}}]),t}(r.a.Component)),we=Object(c.b)((function(e){return{currentUser:e.user.currentUser}}),(function(e){return{setCurrentUser:function(t){return e(function(e){return{type:p,payload:e}}(t))}}}))(Ne);o.a.render(r.a.createElement(c.a,{store:g},r.a.createElement(i.a,null,r.a.createElement(we,null))),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.10b25876.chunk.js.map